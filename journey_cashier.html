<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DAE Digital Fleet App - POC Stage for PETROS</title>
  <style>
    *, *::before, *::after {
      margin: 0; padding: 0; box-sizing: border-box;
    }

    body {
      background: #0D1B3E;
      color: #fff;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      min-height: 100vh;
      padding: 64px 32px 96px;
    }

    /* ─── Page Header ─────────────────────────────── */
    .page-header {
      max-width: 900px;
      margin: 0 auto 72px;
      text-align: center;
    }

    /* Logo row: DAE logo | title block | PETROS logo */
    .logo-row {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      margin-bottom: 14px;
      flex-wrap: wrap;
    }

    .logo-row .dae-logo {
      height: 36px;
      width: auto;
      filter: brightness(0) invert(1);
      opacity: 0.9;
      flex-shrink: 0;
    }

    .logo-row .petros-logo {
      height: 36px;
      width: auto;
      object-fit: contain;
      flex-shrink: 0;
    }

    .logo-title-block {
      text-align: center;
    }

    .page-header h1 {
      font-size: 38px;
      font-weight: 700;
      letter-spacing: -0.6px;
      line-height: 1.15;
      margin-bottom: 4px;
      color: #fff;
    }

    .poc-label {
      display: block;
      font-size: 12px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1.3px;
      color: #FFA500;
    }

    .page-header p {
      font-size: 15px;
      color: rgba(255, 255, 255, 0.45);
      line-height: 1.6;
      margin-top: 12px;
    }

    /* ─── Timeline Container ──────────────────────── */
    .timeline {
      max-width: 900px;
      margin: 0 auto;
      position: relative;
      padding-left: 80px;
    }

    /* Vertical connector line — runs behind all circles */
    .timeline::before {
      content: '';
      position: absolute;
      left: 27px; /* center of 54px circle */
      top: 54px;
      bottom: 54px;
      width: 2px;
      background: linear-gradient(
        to bottom,
        rgba(30, 144, 255, 0.85) 0%,
        rgba(30, 144, 255, 0.4) 60%,
        rgba(30, 144, 255, 0.08) 100%
      );
    }

    /* ─── Individual Step ─────────────────────────── */
    .step {
      position: relative;
      margin-bottom: 36px;
    }

    .step:last-child {
      margin-bottom: 0;
    }

    /* Circle marker */
    .step-marker {
      position: absolute;
      left: -80px;
      top: 22px;
      width: 54px;
      height: 54px;
      border-radius: 50%;
      background: linear-gradient(135deg, #2196f3 0%, #0d6ed6 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 17px;
      font-weight: 700;
      color: #fff;
      box-shadow:
        0 0 0 4px rgba(30, 144, 255, 0.15),
        0 6px 24px rgba(30, 144, 255, 0.45);
      z-index: 1;
    }

    /* Card */
    .step-card {
      background: rgba(255, 255, 255, 0.04);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 18px;
      padding: 26px 26px 26px 28px;
      display: flex;
      gap: 28px;
      align-items: flex-start;
      transition: border-color 0.25s ease, background 0.25s ease;
    }

    .step-card:hover {
      border-color: rgba(30, 144, 255, 0.28);
      background: rgba(30, 144, 255, 0.04);
    }

    /* ─── Text Side ───────────────────────────────── */
    .step-text {
      flex: 1;
      min-width: 0;
      padding-top: 2px;
    }

    .step-badge {
      display: inline-block;
      background: rgba(30, 144, 255, 0.1);
      border: 1px solid rgba(30, 144, 255, 0.3);
      color: #5BAEFF;
      font-size: 10px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.9px;
      padding: 3px 10px;
      border-radius: 100px;
      margin-bottom: 11px;
    }

    .step-title {
      font-size: 17px;
      font-weight: 600;
      line-height: 1.35;
      margin-bottom: 11px;
      color: #fff;
    }

    .step-description {
      font-size: 13.5px;
      color: rgba(255, 255, 255, 0.52);
      line-height: 1.7;
    }

    .step-description ul {
      margin-top: 9px;
      padding-left: 0;
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .step-description ul li {
      display: flex;
      gap: 8px;
      align-items: baseline;
      font-size: 13px;
      color: rgba(255, 255, 255, 0.45);
    }

    .step-description ul li .li-key {
      flex-shrink: 0;
      font-size: 10px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: #5BAEFF;
      opacity: 0.75;
      min-width: 14px;
    }

    /* ─── Preview Side ────────────────────────────── */
    .step-preview-wrap {
      flex-shrink: 0;
      width: 182px;
    }

    .preview-label {
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.9px;
      color: rgba(255, 255, 255, 0.25);
      margin-bottom: 8px;
      text-align: center;
    }

    /* Phone-shaped preview frame */
    .preview-phone {
      width: 182px;
      height: 214px;
      border-radius: 14px;
      overflow: hidden;
      border: 1px solid rgba(30, 144, 255, 0.22);
      background: #060d22;
      position: relative;
    }

    /* iframe scaled to fit: 430px → 182px = 0.4233 scale */
    .preview-phone iframe {
      width: 430px;
      height: 506px;  /* 214 / 0.4233 ≈ 506px to fill container height */
      border: none;
      transform: scale(0.4233);
      transform-origin: top left;
      pointer-events: none;
      display: block;
    }

    /* Placeholder for unprototyped screens */
    .preview-placeholder {
      width: 182px;
      height: 214px;
      border-radius: 14px;
      border: 1px dashed rgba(30, 144, 255, 0.28);
      background: rgba(30, 144, 255, 0.03);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 11px;
      color: rgba(255, 255, 255, 0.28);
      font-size: 12px;
      line-height: 1.55;
      text-align: center;
    }

    .placeholder-icon {
      opacity: 0.4;
    }

    /* ─── Footer ──────────────────────────────────── */
    .page-footer {
      max-width: 900px;
      margin: 60px auto 0;
      padding-top: 28px;
      border-top: 1px solid rgba(255, 255, 255, 0.07);
      text-align: center;
      font-size: 12px;
      color: rgba(255, 255, 255, 0.22);
      line-height: 1.7;
    }

    /* ─── Mobile Responsive ───────────────────────── */
    @media (max-width: 640px) {
      body { padding: 36px 16px 64px; }
      .page-header { margin-bottom: 44px; }
      .page-header h1 { font-size: 26px; }
      .logo-row .dae-logo, .logo-row .petros-logo { height: 26px; }
      .logo-row { gap: 12px; }
      .page-header p { font-size: 13px; }
      .timeline { padding-left: 52px; }
      .timeline::before { left: 17px; }
      .step-marker { left: -52px; width: 36px; height: 36px; font-size: 13px; top: 18px; }
      .step-card { flex-direction: column; gap: 18px; padding: 20px; border-radius: 14px; }
      .step-preview-wrap { width: 100%; }
      .preview-phone { width: 100%; max-width: 280px; height: 200px; margin: 0 auto; }
      .preview-phone iframe { width: 430px; height: 473px; transform: scale(calc(280/430)); transform-origin: top left; }
      .preview-placeholder { width: 100%; max-width: 280px; height: 160px; margin: 0 auto; }
      .step-title { font-size: 15px; }
      .step-description { font-size: 12.5px; }
    }
  </style>
</head>
<body>

  <!-- ── Header ─────────────────────────────────────── -->
  <header class="page-header">
    <div class="logo-row">
      <img src="logo-nobackground.svg" alt="DAE Logo" class="dae-logo">
      <div class="logo-title-block">
        <h1>DAE Digital Fleet App</h1>
        <span class="poc-label">POC Stage for PETROS</span>
      </div>
      <img src="petros.svg.png" alt="PETROS Logo" class="petros-logo">
    </div>
    <p>Cashier Journey — Sunmi EDC &amp; station POS workflow from QR scan to CMS submission</p>
  </header>

  <!-- ── Timeline ──────────────────────────────────── -->
  <div class="timeline">

    <!-- ── Step 1: Driver Shows QR Code ── -->
    <div class="step">
      <div class="step-marker">1</div>
      <div class="step-card">
        <div class="step-text">
          <span class="step-badge">QR Received</span>
          <h2 class="step-title">Driver Presents QR Code at C-Store</h2>
          <p class="step-description">
            The driver enters the C-store and holds up their fleet app, which displays a time-limited QR code containing the authorised transaction details — the cashier visually confirms the code is active before scanning.
          </p>
        </div>
        <div class="step-preview-wrap">
          <p class="preview-label">Driver's Phone</p>
          <div class="preview-phone">
            <iframe id="iframe-1" src="index.html" loading="lazy" title="Driver QR code screen"></iframe>
          </div>
        </div>
      </div>
    </div>

    <!-- ── Step 2: Cashier Scans QR on Sunmi EDC ── -->
    <div class="step">
      <div class="step-marker">2</div>
      <div class="step-card">
        <div class="step-text">
          <span class="step-badge">QR Scan</span>
          <h2 class="step-title">Scan QR Code via Sunmi EDC Terminal</h2>
          <p class="step-description">
            The cashier uses the Sunmi EDC terminal's built-in scanner to read the driver's QR code; the terminal instantly displays the verified transaction details for the cashier to review and confirm before authorising the pump.
          </p>
        </div>
        <div class="step-preview-wrap">
          <p class="preview-label">Sunmi Terminal</p>
          <div class="preview-placeholder">
            <!-- Barcode scanner icon -->
            <svg class="placeholder-icon" width="38" height="38" viewBox="0 0 24 24" fill="none"
              stroke="rgba(30,144,255,0.7)" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round">
              <path d="M3 7V5a2 2 0 0 1 2-2h2"/>
              <path d="M17 3h2a2 2 0 0 1 2 2v2"/>
              <path d="M21 17v2a2 2 0 0 1-2 2h-2"/>
              <path d="M7 21H5a2 2 0 0 1-2-2v-2"/>
              <line x1="7" y1="8" x2="7" y2="16"/>
              <line x1="10" y1="8" x2="10" y2="16"/>
              <line x1="13" y1="8" x2="13" y2="16"/>
              <line x1="16.5" y1="8" x2="16.5" y2="11"/>
              <line x1="16.5" y1="13" x2="16.5" y2="16"/>
            </svg>
            Sunmi EDC scan screen<br>not yet prototyped
          </div>
        </div>
      </div>
    </div>

    <!-- ── Step 3: Fueling Authorised — Preset on POS ── -->
    <div class="step">
      <div class="step-marker">3</div>
      <div class="step-card">
        <div class="step-text">
          <span class="step-badge">Pump Preset</span>
          <h2 class="step-title">Fueling Authorised — Preset Fuel Type &amp; Nozzle on POS</h2>
          <p class="step-description">
            After confirming the transaction details on the Sunmi terminal, the cashier authorises the request and then sets the approved fuel type and nozzle number on the existing station POS system, enabling the driver's designated pump.
          </p>
        </div>
        <div class="step-preview-wrap">
          <p class="preview-label">Station POS</p>
          <div class="preview-placeholder">
            <!-- Fuel pump / nozzle icon -->
            <svg class="placeholder-icon" width="38" height="38" viewBox="0 0 24 24" fill="none"
              stroke="rgba(30,144,255,0.7)" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round">
              <path d="M3 22V8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v14"/>
              <path d="M3 22h10"/>
              <path d="M13 8l3-3 2 2-1 1"/>
              <path d="M18 8v5a2 2 0 0 0 2 2h0"/>
              <rect x="5" y="10" width="6" height="4" rx="1"/>
            </svg>
            Station POS preset screen<br>not yet prototyped
          </div>
        </div>
      </div>
    </div>

    <!-- ── Step 4: Fueling Completed — Read Final Amount ── -->
    <div class="step">
      <div class="step-marker">4</div>
      <div class="step-card">
        <div class="step-text">
          <span class="step-badge">POS Reading</span>
          <h2 class="step-title">Fueling Completed — Read Final Amount from POS</h2>
          <p class="step-description">
            Once the driver re-hangs the nozzle and fueling stops, the cashier reads the final fueled amount in MYR and the total litres dispensed directly from the station POS system's transaction summary screen.
          </p>
        </div>
        <div class="step-preview-wrap">
          <p class="preview-label">Station POS</p>
          <div class="preview-placeholder">
            <!-- Monitor / display icon -->
            <svg class="placeholder-icon" width="38" height="38" viewBox="0 0 24 24" fill="none"
              stroke="rgba(30,144,255,0.7)" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round">
              <rect x="2" y="3" width="20" height="14" rx="2"/>
              <line x1="8" y1="21" x2="16" y2="21"/>
              <line x1="12" y1="17" x2="12" y2="21"/>
              <line x1="7" y1="8" x2="17" y2="8"/>
              <line x1="7" y1="12" x2="13" y2="12"/>
            </svg>
            Station POS completion screen<br>not yet prototyped
          </div>
        </div>
      </div>
    </div>

    <!-- ── Step 5: Enter Final Amount on Sunmi EDC ── -->
    <div class="step">
      <div class="step-marker">5</div>
      <div class="step-card">
        <div class="step-text">
          <span class="step-badge">CMS Capture</span>
          <h2 class="step-title">Enter Final Fueled Amount on Sunmi EDC Terminal</h2>
          <p class="step-description">
            The cashier keys the final fueled amount (MYR) into the Sunmi EDC Terminal app, submitting the completed transaction to the DAE CMS back end — this triggers the automatic generation of an e-receipt that is instantly pushed to the driver's fleet app.
          </p>
        </div>
        <div class="step-preview-wrap">
          <p class="preview-label">Sunmi Terminal</p>
          <div class="preview-placeholder">
            <!-- Keypad / entry icon -->
            <svg class="placeholder-icon" width="38" height="38" viewBox="0 0 24 24" fill="none"
              stroke="rgba(30,144,255,0.7)" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round">
              <rect x="5" y="2" width="14" height="20" rx="2"/>
              <line x1="9" y1="7" x2="15" y2="7"/>
              <circle cx="9"  cy="11" r="0.8" fill="rgba(30,144,255,0.7)" stroke="none"/>
              <circle cx="12" cy="11" r="0.8" fill="rgba(30,144,255,0.7)" stroke="none"/>
              <circle cx="15" cy="11" r="0.8" fill="rgba(30,144,255,0.7)" stroke="none"/>
              <circle cx="9"  cy="14.5" r="0.8" fill="rgba(30,144,255,0.7)" stroke="none"/>
              <circle cx="12" cy="14.5" r="0.8" fill="rgba(30,144,255,0.7)" stroke="none"/>
              <circle cx="15" cy="14.5" r="0.8" fill="rgba(30,144,255,0.7)" stroke="none"/>
              <rect x="9" y="17.5" width="6" height="2" rx="1" fill="rgba(30,144,255,0.4)" stroke="none"/>
            </svg>
            Sunmi EDC entry screen<br>not yet prototyped
          </div>
        </div>
      </div>
    </div>

  </div><!-- /timeline -->

  <!-- ── Footer ────────────────────────────────────── -->
  <footer class="page-footer">
    DAE Digital Fleet App &nbsp;·&nbsp; POC Stage for PETROS &nbsp;·&nbsp; Cashier Journey
  </footer>

  <script>
    // After each iframe finishes loading, navigate it to the target screen
    var screenMap = {
      'iframe-1': 'screen-qr'
    };

    Object.keys(screenMap).forEach(function (id) {
      var targetScreen = screenMap[id];
      var iframe = document.getElementById(id);

      iframe.addEventListener('load', function () {
        try {
          var win = iframe.contentWindow;
          if (win && typeof win.navigateTo === 'function') {
            win.navigateTo(targetScreen);
          }
        } catch (e) {
          // Same-origin access failed — silently skip
        }
      });
    });
  </script>

</body>
</html>
